---
sidebar: sidebar 
permalink: task-creating-relationships.html 
keywords: sync, relationship, create, tags, settings, create a relationship, creating relationships, bucket setup, tags, bluexp, copy and sync 
summary: 동기화 관계를 생성하면 NetApp Copy and Sync가 소스에서 대상으로 파일을 복사합니다.  최초 복사 후, 서비스는 24시간마다 변경된 데이터를 동기화합니다. 
---
= NetApp Copy and Sync에서 동기화 관계 만들기
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
동기화 관계를 생성하면 NetApp Copy and Sync가 소스에서 대상으로 파일을 복사합니다.  최초 복사 후, 복사 및 동기화는 24시간마다 변경된 데이터를 동기화합니다.

일부 유형의 동기화 관계를 만들려면 먼저 NetApp 콘솔에서 시스템을 만들어야 합니다.



== 특정 유형의 시스템에 대한 동기화 관계 생성

다음 중 하나에 대한 동기화 관계를 만들려면 먼저 시스템을 만들거나 검색해야 합니다.

* ONTAP 용 Amazon FSx
* Azure NetApp Files
* Cloud Volumes ONTAP
* 온프레미스 ONTAP 클러스터


.단계
. link:task-login-copyandsync.html["복사 및 동기화에 로그인하세요"] .
. 시스템을 생성하거나 발견합니다.
+
** https://docs.netapp.com/us-en/bluexp-fsx-ontap/start/task-getting-started-fsx.html["Amazon FSx for ONTAP 시스템 생성"^]
** https://docs.netapp.com/us-en/bluexp-azure-netapp-files/task-quick-start.html["Azure NetApp Files 설정 및 검색"^]
** https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/task-deploying-otc-aws.html["AWS에서 Cloud Volumes ONTAP 출시"^]
** https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/task-deploying-otc-azure.html["Azure에서 Cloud Volumes ONTAP 시작"^]
** https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/task-deploying-gcp.html["Google Cloud에서 Cloud Volumes ONTAP 출시"^]
** https://docs.netapp.com/us-en/bluexp-cloud-volumes-ontap/task-adding-systems.html["기존 Cloud Volumes ONTAP 시스템 추가"^]
** https://docs.netapp.com/us-en/bluexp-ontap-onprem/task-discovering-ontap.html["ONTAP 클러스터 검색"^]


. *시스템 페이지*를 선택하세요.
. 위에 나열된 유형 중 하나와 일치하는 시스템을 선택하세요.
. 동기화 옆에 있는 작업 메뉴를 선택하세요.
+
image:screenshot_sync_we.gif["시스템을 선택한 후 동기화 메뉴에서 사용할 수 있는 작업을 보여주는 스크린샷입니다."]

. *이 위치에서 데이터 동기화* 또는 *이 위치에 데이터 동기화*를 선택하고 화면의 지시에 따라 동기화 관계를 설정합니다.




== 다른 유형의 동기화 관계 만들기

다음 단계를 사용하여 Amazon FSx for ONTAP, Azure NetApp Files, Cloud Volumes ONTAP 또는 온프레미스 ONTAP 클러스터가 아닌 지원되는 스토리지 유형과 데이터를 동기화합니다.  아래 단계에서는 NFS 서버에서 S3 버킷으로 동기화 관계를 설정하는 방법을 보여주는 예를 제공합니다.

. NetApp 콘솔에서 *동기화*를 선택합니다.
. *동기화 관계 정의* 페이지에서 소스와 대상을 선택합니다.
+
다음 단계에서는 NFS 서버에서 S3 버킷으로 동기화 관계를 만드는 방법의 예를 보여줍니다.

+
image:screenshot_nfs_to_s3.png["새로운 동기화 관계에서 NFS를 소스로, S3를 대상으로 보여주는 스크린샷입니다."]

. *NFS 서버* 페이지에서 AWS와 동기화하려는 NFS 서버의 IP 주소나 정규화된 도메인 이름을 입력합니다.
. *데이터 브로커 그룹* 페이지에서 프롬프트에 따라 AWS, Azure 또는 Google Cloud Platform에서 데이터 브로커 가상 머신을 만들거나 기존 Linux 호스트에 데이터 브로커 소프트웨어를 설치합니다.
+
자세한 내용은 다음 페이지를 참조하세요.

+
** link:task-installing-aws.html["AWS에서 데이터 브로커 만들기"]
** link:task-installing-azure.html["Azure에서 데이터 브로커 만들기"]
** link:task-installing-gcp.html["Google Cloud에서 데이터 브로커 만들기"]
** link:task-installing-linux.html["Linux 호스트에 데이터 브로커 설치"]


. 데이터 브로커를 설치한 후 *계속*을 선택하세요.
+
image:screenshot-data-broker-group.png["이 스크린샷은 성공적으로 배포된 인스턴스를 보여줍니다.  인터페이스에는 AWS 네트워킹을 포함한 인스턴스에 대한 세부 정보가 표시됩니다."]

. [[필터]]*디렉토리* 페이지에서 최상위 디렉토리나 하위 디렉토리를 선택하세요.
+
복사 및 동기화에서 내보내기를 검색할 수 없는 경우 *수동으로 내보내기 추가*를 선택하고 NFS 내보내기의 이름을 입력합니다.

+

NOTE: NFS 서버에서 두 개 이상의 디렉토리를 동기화하려면 작업을 마친 후 추가 동기화 관계를 만들어야 합니다.

. *AWS S3 버킷* 페이지에서 버킷을 선택하세요.
+
** 버킷 내의 기존 폴더를 선택하거나 버킷 내에 만든 새 폴더를 선택하려면 드릴다운합니다.
** AWS 계정과 연결되지 않은 S3 버킷을 선택하려면 *목록에 추가*를 선택하세요. link:reference-requirements.html#s3["S3 버킷에 특정 권한을 적용해야 합니다."] .


. *버킷 설정* 페이지에서 버킷을 설정합니다.
+
** S3 버킷 암호화를 활성화할지 선택한 다음 AWS KMS 키를 선택하거나 KMS 키의 ARN을 입력하거나 AES-256 암호화를 선택합니다.
** S3 스토리지 클래스를 선택하세요. link:reference-supported-relationships.html#storage-classes["지원되는 스토리지 클래스 보기"] .
+
image:screenshot_bucket_setup.gif["이 스크린샷은 암호화에 대해 '예' 또는 '아니요'를 선택하고 동기화된 데이터에 대한 특정 S3 스토리지 클래스를 선택할 수 있는 버킷 설정 페이지를 보여줍니다."]



. [[설정]]설정 페이지에서 소스 파일과 폴더가 대상 위치에서 동기화되고 유지되는 방식을 정의합니다.
+
일정:: 향후 동기화를 위해 반복 일정을 선택하거나 동기화 일정을 끕니다.  최대 1분마다 데이터를 동기화하도록 관계를 예약할 수 있습니다.
동기화 시간 초과:: 동기화가 지정된 분, 시간 또는 일 수 내에 완료되지 않을 경우 복사 및 동기화가 데이터 동기화를 취소해야 하는지 여부를 정의합니다.
알림:: NetApp 콘솔의 알림 센터에서 복사 및 동기화 알림을 받을지 여부를 선택할 수 있습니다.  성공적인 데이터 동기화, 실패한 데이터 동기화, 취소된 데이터 동기화에 대한 알림을 활성화할 수 있습니다.
재시도:: 복사 및 동기화가 파일을 건너뛰기 전에 동기화를 다시 시도해야 하는 횟수를 정의합니다.
연속 동기화:: 초기 데이터 동기화 후, 복사 및 동기화는 소스 S3 버킷이나 Google Cloud Storage 버킷의 변경 사항을 수신하고 발생하는 모든 변경 사항을 대상에 지속적으로 동기화합니다.  예약된 간격으로 소스를 다시 스캔할 필요가 없습니다.
+
--
이 설정은 동기화 관계를 생성할 때와 S3 버킷 또는 Google Cloud Storage에서 Azure Blob Storage, CIFS, Google Cloud Storage, IBM Cloud Object Storage, NFS, S3 및 StorageGRID 또는 Azure Blob Storage에서 Azure Blob Storage, CIFS, Google Cloud Storage, IBM Cloud Object Storage, NFS 및 StorageGRID 로 데이터를 동기화할 때만 사용할 수 있습니다.

이 설정을 활성화하면 다음과 같이 다른 기능에 영향을 미칩니다.

** 동기화 일정이 비활성화되었습니다.
** 다음 설정은 기본값으로 돌아갑니다: 동기화 시간 초과, 최근 수정된 파일, 수정 날짜.
** S3가 소스인 경우 크기별 필터는 복사 이벤트에서만 활성화됩니다(삭제 이벤트에서는 활성화되지 않음).
** 관계가 생성된 후에는 관계를 가속화하거나 삭제할 수만 있습니다.  동기화를 중단하거나, 설정을 수정하거나, 보고서를 볼 수 없습니다.
+
외부 버킷과 지속적인 동기화 관계를 만드는 것이 가능합니다.  그렇게 하려면 다음 단계를 따르세요.

+
... 외부 버킷 프로젝트에 대한 Google Cloud 콘솔로 이동합니다.
... *클라우드 스토리지 > 설정 > 클라우드 스토리지 서비스 계정*으로 이동합니다.
... local.json 파일을 업데이트합니다.
+
[source, json]
----
{
"protocols": {
    "gcp": {
        "storage-account-email": <storage account email>
}
}
}
----
... 데이터 브로커를 다시 시작합니다.
+
.... sudo pm2 모두 중지
.... sudo pm2 모두 시작


... 해당 외부 버킷과 지속적인 동기화 관계를 만듭니다.
+

NOTE: 외부 버킷과 지속적인 동기화 관계를 생성하는 데 사용되는 데이터 브로커는 해당 프로젝트의 버킷과 다른 지속적인 동기화 관계를 생성할 수 없습니다.





--
비교 기준:: 복사 및 동기화에서 파일이나 디렉토리가 변경되어 다시 동기화해야 하는지 여부를 결정할 때 특정 속성을 비교해야 하는지 여부를 선택합니다.
+
--
이러한 속성의 선택을 해제하더라도 복사 및 동기화는 경로, 파일 크기, 파일 이름을 확인하여 소스와 대상을 비교합니다.  변경 사항이 있으면 해당 파일과 디렉토리를 동기화합니다.

다음 속성을 비교하여 복사 및 동기화를 활성화하거나 비활성화할 수 있습니다.

** *mtime*: 파일의 마지막 수정 시간.  이 속성은 디렉토리에 유효하지 않습니다.
** *uid*, *gid*, 및 *mode*: Linux의 권한 플래그입니다.


--
개체에 대한 복사:: 이 옵션을 활성화하면 개체 저장소 메타데이터와 태그를 복사할 수 있습니다.  사용자가 소스의 메타데이터를 변경하면 복사 및 동기화는 다음 동기화에서 이 개체를 복사하지만, 사용자가 소스의 태그를 변경하고 데이터 자체는 변경하지 않으면 복사 및 동기화는 다음 동기화에서 개체를 복사하지 않습니다.
+
--
관계를 만든 후에는 이 옵션을 편집할 수 없습니다.

태그 복사는 Azure Blob 또는 S3 호환 엔드포인트(S3, StorageGRID 또는 IBM Cloud Object Storage)를 대상으로 포함하는 동기화 관계에서 지원됩니다.

다음 엔드포인트 간의 "클라우드 간" 관계를 통해 메타데이터 복사가 지원됩니다.

** AWS S3
** Azure Blob
** 구글 클라우드 스토리지
** IBM 클라우드 객체 스토리지
** StorageGRID


--
최근 수정된 파일:: 예약된 동기화 전에 최근 수정된 파일을 제외하도록 선택합니다.
소스에서 파일 삭제:: 복사 및 동기화를 통해 파일을 대상 위치로 복사한 후 소스 위치에서 파일을 삭제하도록 선택합니다.  이 옵션을 사용하면 원본 파일이 복사된 후 삭제되므로 데이터 손실 위험이 있습니다.
+
--
이 옵션을 활성화하면 데이터 브로커의 local.json 파일에서 매개변수도 변경해야 합니다.  파일을 열고 다음과 같이 업데이트하세요.

[source, json]
----
{
"workers":{
"transferrer":{
"delete-on-source": true
}
}
}
----
local.json 파일을 업데이트한 후에는 다시 시작해야 합니다. `pm2 restart all` .

--
대상의 파일 삭제:: 소스에서 파일이 삭제된 경우 대상 위치에서도 파일을 삭제하도록 선택합니다.  기본적으로 대상 위치에서 파일을 삭제하지 않습니다.
파일 유형:: 각 동기화에 포함할 파일 유형을 정의합니다. 파일, 디렉토리, 심볼릭 링크, 하드 링크입니다.
+
--

NOTE: 하드 링크는 보안되지 않은 NFS 간 관계에만 사용할 수 있습니다.  사용자는 하나의 스캐너 프로세스와 하나의 스캐너 동시성으로 제한되며, 스캔은 루트 디렉토리에서 실행해야 합니다.

--
파일 확장자 제외:: 동기화에서 제외할 정규식이나 파일 확장자를 지정하려면 파일 확장자를 입력하고 *Enter*를 누릅니다.  예를 들어, *.log 파일을 제외하려면 _log_ 또는 _.log_를 입력합니다.  여러 개의 확장자를 사용하는 경우 구분 기호는 필요하지 않습니다.  다음 영상은 짧은 데모를 제공합니다.
+
--
.동기화 관계에 대한 파일 확장자 제외
video::7f957dbf-9215-41ea-a705-b24c010b2212[panopto]

NOTE: 정규 표현식은 와일드카드나 글로브 표현식과 다릅니다.  이 기능은 정규 표현식에서만 작동합니다.

--
디렉토리 제외:: 이름이나 디렉토리 전체 경로를 입력하고 *Enter*를 눌러 동기화에서 제외할 정규식이나 디렉토리를 최대 15개까지 지정합니다.  .copy-offload, .snapshot, ~snapshot 디렉토리는 기본적으로 제외됩니다.
+
--

NOTE: 정규 표현식은 와일드카드나 글로브 표현식과 다릅니다.  이 기능은 정규 표현식에서만 작동합니다.

--
파일 크기:: 크기에 관계없이 모든 파일을 동기화하거나 특정 크기 범위에 속하는 파일만 동기화하도록 선택합니다.
수정 날짜:: 마지막 수정 날짜와 관계없이 모든 파일을 선택합니다. 특정 날짜 이후, 특정 날짜 이전 또는 기간 사이에 수정된 파일을 선택합니다.
생성 날짜:: SMB 서버가 소스인 경우, 이 설정을 사용하면 특정 날짜 이후, 특정 날짜 이전 또는 특정 기간 사이에 생성된 파일을 동기화할 수 있습니다.
ACL - 액세스 제어 목록:: 관계를 생성할 때 또는 관계를 생성한 후에 설정을 활성화하여 SMB 서버에서 ACL만 복사하거나, 파일만 복사하거나, ACL과 파일을 모두 복사합니다.


. *태그/메타데이터* 페이지에서 S3 버킷으로 전송되는 모든 파일에 태그로 키-값 쌍을 저장할지, 아니면 모든 파일에 메타데이터 키-값 쌍을 할당할지 선택합니다.
+
image:screenshot_relationship_tags.png["Amazon S3에 대한 동기화 관계를 생성할 때 태그/메타데이터 페이지를 보여주는 스크린샷입니다."]

+

TIP: StorageGRID 및 IBM Cloud Object Storage에 데이터를 동기화할 때도 동일한 기능을 사용할 수 있습니다.  Azure 및 Google Cloud Storage의 경우 메타데이터 옵션만 사용할 수 있습니다.

. 동기화 관계의 세부 정보를 검토한 다음 *관계 만들기*를 선택합니다.


*결과*

복사 및 동기화는 소스와 대상 간의 데이터 동기화를 시작합니다.  동기화에 걸린 시간, 동기화가 중단되었는지 여부, 복사, 스캔 또는 삭제된 파일 수에 대한 동기화 통계를 사용할 수 있습니다.  그런 다음 다음을 관리할 수 있습니다. https://docs.netapp.com/us-en/bluexp-copy-sync/task-managing-relationships.html["동기화 관계"] , https://docs.netapp.com/us-en/bluexp-copy-sync/task-managing-data-brokers.html["데이터 브로커를 관리하세요"] , 또는 https://docs.netapp.com/us-en/bluexp-copy-sync/task-managing-reports.html#creating-reports["성능과 구성을 최적화하기 위한 보고서 생성"] .



== NetApp 데이터 분류에서 동기화 관계 만들기

Copy and Sync는 NetApp 데이터 분류와 통합되어 있습니다.  NetApp 데이터 분류 내에서 복사 및 동기화를 사용하여 대상 위치로 동기화하려는 소스 파일을 선택할 수 있습니다.

NetApp Data Classification에서 데이터 동기화를 시작하면 모든 소스 정보가 단일 단계에 포함되며 몇 가지 주요 세부 정보만 입력하면 됩니다.  그런 다음 새로운 동기화 관계에 대한 대상 위치를 선택합니다.

image:screenshot-sync-data-sense.png["NetApp 데이터 분류에서 직접 새 동기화를 시작한 후 나타나는 NetApp 데이터 분류 통합 페이지를 보여주는 스크린샷입니다."]

https://docs.netapp.com/us-en/bluexp-classification/task-managing-highlights.html#copying-and-synchronizing-source-files-to-a-target-system["NetApp 데이터 분류에서 동기화 관계를 시작하는 방법을 알아보세요."^] .
