---
sidebar: sidebar 
permalink: task-nfs-encryption.html 
keywords: encryption, in flight, data in flight, in-flight, data-in-flight, nfs, initiator, listener, port 
summary: 회사에 엄격한 보안 정책이 있는 경우 전송 중인 데이터 암호화를 사용하여 서로 다른 네트워크에 있는 NFS 서버 간에 데이터를 동기화하세요. 
---
= NetApp Copy and Sync에서 전송 중 데이터 암호화를 사용하여 NFS 데이터 동기화
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
회사에 엄격한 보안 정책이 있는 경우 NetApp Copy and Sync의 전송 중 데이터 암호화를 사용하여 NFS 데이터를 동기화할 수 있습니다.  이 기능은 NFS 서버에서 다른 NFS 서버로, Azure NetApp Files 에서 Azure NetApp Files 로 지원됩니다.

예를 들어, 서로 다른 네트워크에 있는 두 개의 NFS 서버 간에 데이터를 동기화하고 싶을 수 있습니다.  또는 Azure NetApp Files 에서 서브넷이나 지역 간에 데이터를 안전하게 전송해야 할 수도 있습니다.



== 전송 중인 데이터 암호화 작동 방식

전송 중 데이터 암호화는 두 데이터 브로커 간 네트워크를 통해 전송되는 NFS 데이터를 암호화합니다.  다음 이미지는 두 개의 NFS 서버와 두 개의 데이터 브로커 간의 관계를 보여줍니다.

image:diagram_nfs_encryption.gif["두 개의 NFS 서버와 두 개의 데이터 브로커를 보여주는 다이어그램입니다.  데이터는 소스 NFS 서버에서 소스 데이터 브로커로 흐르고, 이 지점에서 데이터가 암호화됩니다.  그런 다음 데이터는 대상 데이터 브로커로 전송되고, 그다음 대상 NFS 서버로 전송됩니다."]

한 데이터 브로커는 _개시자_ 역할을 합니다.  데이터를 동기화할 시간이 되면 다른 데이터 브로커, 즉 _리스너_에 연결 요청을 보냅니다.  해당 데이터 브로커는 포트 443에서 요청을 수신합니다.  필요한 경우 다른 포트를 사용할 수 있지만, 해당 포트가 다른 서비스에서 사용되고 있지 않은지 확인하세요.

예를 들어, 온프레미스 NFS 서버에서 클라우드 기반 NFS 서버로 데이터를 동기화하는 경우 연결 요청을 수신하는 데이터 브로커와 연결 요청을 보내는 데이터 브로커를 선택할 수 있습니다.

기내 암호화의 작동 방식은 다음과 같습니다.

. 동기화 관계를 만든 후, 개시자는 다른 데이터 브로커와 암호화된 연결을 시작합니다.
. 소스 데이터 브로커는 TLS 1.3을 사용하여 소스의 데이터를 암호화합니다.
. 그런 다음 네트워크를 통해 대상 데이터 브로커로 데이터를 전송합니다.
. 대상 데이터 브로커는 데이터를 대상에 전송하기 전에 암호를 해독합니다.
. 최초 복사 후, 복사 및 동기화 기능은 변경된 데이터를 24시간마다 동기화합니다.  동기화할 데이터가 있는 경우, 시작자는 다른 데이터 브로커와 암호화된 연결을 열면서 프로세스가 시작됩니다.
+
데이터를 더 자주 동기화하려는 경우link:task-managing-relationships.html#change-the-settings-for-a-sync-relationship["관계를 생성한 후 일정을 변경할 수 있습니다."] .





== 지원되는 NFS 버전

* NFS 서버의 경우, 전송 중인 데이터 암호화는 NFS 버전 3, 4.0, 4.1 및 4.2에서 지원됩니다.
* Azure NetApp Files 의 경우 NFS 버전 3 및 4.1에서 전송 중인 데이터 암호화가 지원됩니다.




== 프록시 서버 제한

암호화된 동기화 관계를 생성하면 암호화된 데이터는 HTTPS를 통해 전송되며 프록시 서버를 통해 라우팅될 수 없습니다.



== 시작하는 데 필요한 것

다음 사항을 꼭 확인하세요.

* 두 개의 NFS 서버가 충족합니다.link:reference-requirements.html["소스 및 타겟 요구 사항"] 또는 두 개의 서브넷이나 지역에 Azure NetApp Files .
* 서버의 IP 주소 또는 정규화된 도메인 이름입니다.
* 두 데이터 브로커의 네트워크 위치.
+
기존 데이터 브로커를 선택할 수 있지만 해당 브로커가 개시자 역할을 해야 합니다.  리스너 데이터 브로커는 _새로운_ 데이터 브로커여야 합니다.

+
기존 데이터 브로커 그룹을 사용하려면 그룹에 데이터 브로커가 하나만 있어야 합니다.  그룹 내 여러 데이터 브로커는 암호화된 동기화 관계에서 지원되지 않습니다.

+
아직 데이터 브로커를 배포하지 않았다면 데이터 브로커 요구 사항을 검토하세요.  엄격한 보안 정책이 있으므로 포트 443에서의 아웃바운드 트래픽을 포함한 네트워킹 요구 사항을 검토해야 합니다.link:reference-networking.html["인터넷 엔드포인트"] 데이터 브로커가 연락하는 곳.

+
** link:task-installing-aws.html["AWS 설치 검토"]
** link:task-installing-azure.html["Azure 설치 검토"]
** link:task-installing-gcp.html["Google Cloud 설치 검토"]
** link:task-installing-linux.html["Linux 호스트 설치 검토"]






== 데이터 전송 중 암호화를 사용하여 NFS 데이터 동기화

두 NFS 서버 간 또는 Azure NetApp Files 간에 새로운 동기화 관계를 만들고, 진행 중 암호화 옵션을 활성화한 다음, 화면의 지시를 따릅니다.

.단계
. link:task-login-copyandsync.html["복사 및 동기화에 로그인하세요"] .
. *새 동기화 만들기*를 선택합니다.
. *NFS 서버*를 소스 및 대상 위치로 끌어다 놓거나 * Azure NetApp Files*를 소스 및 대상 위치로 끌어다 놓고 *예*를 선택하여 전송 중인 데이터 암호화를 활성화합니다.
. 다음 지시에 따라 관계를 생성하세요.
+
.. *NFS 서버*/* Azure NetApp Files*: NFS 버전을 선택한 다음 새 NFS 소스를 지정하거나 기존 서버를 선택합니다.
.. *데이터 브로커 기능 정의*: 포트에서 연결 요청을 _수신_하는 데이터 브로커와 연결을 _시작_하는 데이터 브로커를 정의합니다.  귀하의 네트워킹 요구 사항에 따라 선택하세요.
.. *데이터 브로커*: 메시지에 따라 새로운 소스 데이터 브로커를 추가하거나 기존 데이터 브로커를 선택합니다.
+
다음 사항에 유의하세요.

+
*** 기존 데이터 브로커 그룹을 사용하려면 그룹에 데이터 브로커가 하나만 있어야 합니다.  그룹 내 여러 데이터 브로커는 암호화된 동기화 관계에서 지원되지 않습니다.
*** 소스 데이터 브로커가 리스너 역할을 하는 경우 새로운 데이터 브로커여야 합니다.
*** 새로운 데이터 브로커가 필요한 경우 Copy and Sync에서 설치 지침을 안내합니다.  클라우드에 데이터 브로커를 배포하거나 자체 Linux 호스트에 대한 설치 스크립트를 다운로드할 수 있습니다.


.. *디렉토리*: 모든 디렉토리를 선택하거나, 드릴다운하여 하위 디렉토리를 선택하여 동기화할 디렉토리를 선택합니다.
+
*소스 개체 필터링*을 선택하면 소스 파일과 폴더가 대상 위치에서 동기화되고 유지되는 방식을 정의하는 설정을 수정합니다.

+
image:screenshot_directories.gif["최상위 디렉토리를 선택하고, 드릴다운하고, 필터 소스 개체 옵션을 선택하는 옵션을 보여주는 스크린샷입니다."]

.. *대상 NFS 서버*/*대상 Azure NetApp Files*: NFS 버전을 선택한 다음 새 NFS 대상을 입력하거나 기존 서버를 선택합니다.
.. *대상 데이터 브로커*: 메시지에 따라 새로운 소스 데이터 브로커를 추가하거나 기존 데이터 브로커를 선택합니다.
+
대상 데이터 브로커가 리스너 역할을 하는 경우 새로운 데이터 브로커여야 합니다.

+
대상 데이터 브로커가 리스너 역할을 할 때 나타나는 프롬프트의 예는 다음과 같습니다.  포트를 지정하는 옵션에 주목하세요.

+
image:screenshot_nfs_encryption_listener.gif["리스너 데이터 브로커에서 포트를 지정하는 옵션을 보여주는 스크린샷입니다."]

.. *대상 디렉토리*: 최상위 디렉토리를 선택하거나, 드릴다운하여 기존 하위 디렉토리를 선택하거나, 내보내기 내에 새 폴더를 만듭니다.
.. *설정*: 소스 파일과 폴더가 대상 위치에서 동기화되고 유지되는 방식을 정의합니다.
.. *검토*: 동기화 관계의 세부 정보를 검토한 다음 *관계 만들기*를 선택합니다.
+
image:screenshot_nfs_encryption_review.gif["리뷰 화면을 보여주는 스크린샷입니다.  여기에는 NFS 서버, 데이터 브로커 및 각 항목에 대한 네트워킹 정보가 표시됩니다."]





.결과
복사 및 동기화를 통해 새로운 동기화 관계가 생성됩니다.  완료되면 *대시보드에서 보기*를 선택하여 새 관계에 대한 세부 정보를 확인하세요.
